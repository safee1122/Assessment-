import{j as e,F as l,I as h,r as d,u as C,a as F,g as S,C as E,B as I,S as M,P as u,m as N}from"./index-7-61QJr-.js";import{M as T,T as b}from"./Table-CHvNoUiu.js";const z=({editId:r,isModalOpen:a,handleCancel:m,form:i,onFinish:n})=>e.jsx(T,{title:"Enter Product Details",okText:r.current?"Update":"Save",open:a,onOk:i.submit,onCancel:m,children:e.jsxs(l,{form:i,onFinish:n,layout:"vertical",children:[e.jsx(l.Item,{name:"name",rules:[{required:!r.current,message:"Please enter product name"}],children:e.jsx(h,{type:"text",placeholder:"Name",size:"large"})}),e.jsx(l.Item,{name:"image",rules:[{required:!r.current,message:"Please enter image url"}],children:e.jsx(h,{className:"w-100",placeholder:"image",size:"large"})}),e.jsx(l.Item,{name:"description",rules:[{required:!r.current,message:"Please enter description"}],children:e.jsx(h,{className:"w-100",placeholder:"description",size:"large"})})]})}),_=()=>{const[r,a]=d.useState(!1),[m,i]=d.useState(!1),[n]=l.useForm(),c=d.useRef(null),o=C(),x=[{title:"Name",dataIndex:"name",width:200,key:"name",fixed:"left",render:s=>e.jsx("a",{children:s})},{title:"Description",dataIndex:"description",key:"description"},{title:"Action",key:"action",render:(s,t)=>e.jsxs(M,{size:"middle",children:[e.jsx("a",{onClick:()=>{k(t)},children:"Edit"}),e.jsx("a",{onClick:()=>w(t==null?void 0:t._id),children:"Delete"})]})}],p=F(S),f=async()=>{try{o(await u.getAll())}catch(s){console.log("error",s)}};d.useEffect(()=>{f()},[]);const g=async s=>{try{o(await u.create(s)),a(!1),i(!m),N.success("Product created Successfully")}catch(t){console.error(t)}},j=()=>{c.current||n.resetFields(),a(!0)},y=()=>{a(!1)},P=async s=>{c.current?(s._id=c.current,o(await u.update(s)),a(!1)):g(s),n.resetFields()},w=async s=>{try{o(await u.delete(s))}catch(t){console.error(t)}},k=async s=>{try{c.current=s._id,a(!0),n.setFieldsValue({name:s.name,description:s.description,image:s.image})}catch(t){console.error(t)}};return e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"card-wrapper",extra:e.jsx(I,{type:"primary",size:"large",onClick:()=>{c.current=!1,j()},children:"Create Product"}),children:e.jsx("div",{className:"ag-theme-alpine",style:{height:600,maxwidth:100,overflow:"auto"},children:p&&e.jsx(b,{columns:x,dataSource:p,pagination:!1})})}),e.jsx(z,{isModalOpen:r,handleCancel:y,form:n,onFinish:P,editId:c})]})};export{_ as default};
